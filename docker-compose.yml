services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Variables de build (necesarias para Next.js)
        - SITE_URL=${SITE_URL:-https://alvis.blog}
        - NEXT_PUBLIC_GISCUS_REPO=${NEXT_PUBLIC_GISCUS_REPO:-}
        - NEXT_PUBLIC_GISCUS_REPO_ID=${NEXT_PUBLIC_GISCUS_REPO_ID:-}
        - NEXT_PUBLIC_GISCUS_CATEGORY_ID=${NEXT_PUBLIC_GISCUS_CATEGORY_ID:-}
    container_name: alvis-blog
    ports:
      - "3001:3000"
    environment:
      - NODE_ENV=production
      - SITE_URL=${SITE_URL:-https://alvis.blog}
      # Newsletter API (runtime - elige uno)
      - BUTTONDOWN_API_KEY=${BUTTONDOWN_API_KEY:-}
      - RESEND_API_KEY=${RESEND_API_KEY:-}
      - RESEND_AUDIENCE_ID=${RESEND_AUDIENCE_ID:-}
    restart: always
